<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />
		<title>QR Code 轉換器</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				margin: 20px;
			}
			#qrcode {
				margin-top: 20px;
			}
		</style>
	</head>
	<body>
		<h1>QR Code Generator</h1>
		<p>請在下方輸入文字，然後按下「產生QR Code」按鈕：</p>
		<!-- 更新輸入框與按鈕的樣式 -->
		<input
			type="text"
			id="qrText"
			placeholder="輸入文字..."
			style="width: 100%; max-width: 400px; padding: 12px; font-size: 18px" />
		<button
			onclick="pasteToInput()"
			style="padding: 10px 15px; font-size: 18px">
			貼上
		</button>
		<button
			onclick="generateQR()"
			style="padding: 10px 15px; font-size: 18px">
			產生QR Code
		</button>
		<div id="qrcode"></div>
		<!-- 引入 qrcodejs (JavaScript 實作，不需要雲端服務) -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
		<script>
			function generateQR() {
				console.log('generateQR invoked');
				var qrContainer = document.getElementById('qrcode');
				// 清除先前的 QR Code
				qrContainer.innerHTML = '';
				var text = document.getElementById('qrText').value;
				console.log('Input text: ' + text);
				if (!text) {
					alert('請輸入要轉換的文字！');
					return;
				}
				// 產生 QR Code (設定寬高為200像素)
				new QRCode(qrContainer, {
					text: text,
					width: 200,
					height: 200,
				});
				console.log('QR Code generated');
			}

			function pasteToInput() {
				if (navigator.clipboard && navigator.clipboard.readText) {
					navigator.clipboard
						.readText()
						.then(function (text) {
							document.getElementById('qrText').value = text;
						})
						.catch(function (err) {
							console.error('無法讀取剪貼簿內容: ', err);
							alert('無法貼上內容');
						});
				} else {
					alert('你的瀏覽器不支援貼上功能');
				}
			}
		</script>
	</body>
</html>
